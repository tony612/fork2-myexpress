// Generated by CoffeeScript 1.7.1
(function() {
  module.exports = function() {
    var handler, http;
    http = require('http');
    handler = function(request, response) {
      var index, next;
      index = -1;
      next = function() {
        var nextWare;
        index += 1;
        if (nextWare = handler.stack[index]) {
          return nextWare(request, response, next);
        } else {
          return response.statusCode = 404;
        }
      };
      next();
      return response.end();
    };
    handler.listen = function(port, callback) {
      return http.createServer(handler).listen(port, callback);
    };
    handler.stack = [];
    handler.use = function(middleware) {
      return handler.stack.push(middleware);
    };
    return handler;
  };

}).call(this);
